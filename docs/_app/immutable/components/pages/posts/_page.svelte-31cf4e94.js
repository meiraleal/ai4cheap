import{S as se,i as fe,s as ne,$ as j,k as v,l as k,a0 as $,b as w,a1 as ge,W as pe,B as y,h,a2 as ee,a as P,c as R,m as T,F as _,f as S,d as ie,t as G,C as be,D as Y,O as Ee,q as M,r as F,e as te,g as ue,n as q,w as ce,x as _e,y as he,u as L,z as de}from"../../../chunks/index-335ca1a6.js";import{m as le}from"../../../chunks/stores-ef1c9eb6.js";import{c as ve,w as ke,a as Te}from"../../../chunks/index-b9006f2c.js";function De(n){let e,t,l=[n[0],{src:t=n[1]},{rel:"noreferrer"}],f={};for(let r=0;r<l.length;r+=1)f=j(f,l[r]);return{c(){e=v("img"),this.h()},l(r){e=k(r,"IMG",{src:!0,rel:!0}),this.h()},h(){$(e,f)},m(r,a){w(r,e,a)},p(r,[a]){$(e,f=ge(l,[a&1&&r[0],a&2&&!pe(e.src,t=r[1])&&{src:t},{rel:"noreferrer"}]))},i:y,o:y,d(r){r&&h(e)}}}function Ae(n,e,t){let l,{record:f}=e,{file:r}=e,{thumb:a}=e,d;return n.$$set=i=>{t(5,e=j(j({},e),ee(i))),"record"in i&&t(2,f=i.record),"file"in i&&t(3,r=i.file),"thumb"in i&&t(4,a=i.thumb)},n.$$.update=()=>{t(2,{record:f,file:r,thumb:a,...d}=e,f,(t(3,r),t(5,e)),(t(4,a),t(5,e)),(t(0,d),t(5,e))),n.$$.dirty&28&&t(1,l=r?ve.getFileUrl(f,r,{thumb:a}):`https://via.placeholder.com/${a??"100x100"}`)},e=ee(e),[d,l,f,r,a]}class me extends se{constructor(e){super(),fe(this,e,Ae,De,ne,{record:2,file:3,thumb:4})}}function re(n,e,t){const l=n.slice();return l[4]=e[t],l}function Ne(n){let e,t;return{c(){e=v("p"),t=M("Please login to create new posts.")},l(l){e=k(l,"P",{});var f=T(e);t=F(f,"Please login to create new posts."),f.forEach(h)},m(l,f){w(l,e,f),_(e,t)},d(l){l&&h(e)}}}function Pe(n){let e,t;return{c(){e=v("a"),t=M("Create New"),this.h()},l(l){e=k(l,"A",{href:!0});var f=T(e);t=F(f,"Create New"),f.forEach(h),this.h()},h(){q(e,"href","new/edit")},m(l,f){w(l,e,f),_(e,t)},d(l){l&&h(e)}}}function ae(n){let e,t,l,f;return{c(){e=v("tr"),t=v("td"),l=M("No posts found."),f=P()},l(r){e=k(r,"TR",{});var a=T(e);t=k(a,"TD",{});var d=T(t);l=F(d,"No posts found."),d.forEach(h),f=R(a),a.forEach(h)},m(r,a){w(r,e,a),_(e,t),_(t,l),_(e,f)},p:y,d(r){r&&h(e)}}}function Re(n){let e,t,l,f,r,a,d=n[4].title+"",i,p,b,u,A=n[4].updated+"",m,o,c;return l=new me({props:{record:n[4],file:n[4].files[0],thumb:"100x100",alt:n[4].title}}),{c(){e=v("tr"),t=v("td"),ce(l.$$.fragment),f=P(),r=v("td"),a=v("a"),i=M(d),b=P(),u=v("td"),m=M(A),o=P(),this.h()},l(s){e=k(s,"TR",{});var g=T(e);t=k(g,"TD",{});var N=T(t);_e(l.$$.fragment,N),N.forEach(h),f=R(g),r=k(g,"TD",{});var z=T(r);a=k(z,"A",{href:!0});var I=T(a);i=F(I,d),I.forEach(h),z.forEach(h),b=R(g),u=k(g,"TD",{});var B=T(u);m=F(B,A),B.forEach(h),o=R(g),g.forEach(h),this.h()},h(){q(a,"href",p=n[4].slug)},m(s,g){w(s,e,g),_(e,t),he(l,t,null),_(e,f),_(e,r),_(r,a),_(a,i),_(e,b),_(e,u),_(u,m),_(e,o),c=!0},p(s,g){const N={};g&2&&(N.record=s[4]),g&2&&(N.file=s[4].files[0]),g&2&&(N.alt=s[4].title),l.$set(N),(!c||g&2)&&d!==(d=s[4].title+"")&&L(i,d),(!c||g&2&&p!==(p=s[4].slug))&&q(a,"href",p),(!c||g&2)&&A!==(A=s[4].updated+"")&&L(m,A)},i(s){c||(S(l.$$.fragment,s),c=!0)},o(s){G(l.$$.fragment,s),c=!1},d(s){s&&h(e),de(l)}}}function we(n){let e,t,l,f,r,a,d=n[4].title+"",i,p,b,u,A=n[4].updated+"",m,o,c,s,g,N,z,I,B,U,H,W,C;return l=new me({props:{record:n[4],file:n[4].files[0],thumb:"100x100",alt:n[4].title}}),{c(){e=v("tr"),t=v("td"),ce(l.$$.fragment),f=P(),r=v("td"),a=v("a"),i=M(d),b=P(),u=v("td"),m=M(A),o=P(),c=v("td"),s=v("a"),g=M("Edit"),z=P(),I=v("td"),B=v("a"),U=M("Delete"),W=P(),this.h()},l(D){e=k(D,"TR",{});var E=T(e);t=k(E,"TD",{});var O=T(t);_e(l.$$.fragment,O),O.forEach(h),f=R(E),r=k(E,"TD",{});var J=T(r);a=k(J,"A",{href:!0});var K=T(a);i=F(K,d),K.forEach(h),J.forEach(h),b=R(E),u=k(E,"TD",{});var Q=T(u);m=F(Q,A),Q.forEach(h),o=R(E),c=k(E,"TD",{});var V=T(c);s=k(V,"A",{href:!0});var X=T(s);g=F(X,"Edit"),X.forEach(h),V.forEach(h),z=R(E),I=k(E,"TD",{});var Z=T(I);B=k(Z,"A",{href:!0});var x=T(B);U=F(x,"Delete"),x.forEach(h),Z.forEach(h),W=R(E),E.forEach(h),this.h()},h(){q(a,"href",p=n[4].slug),q(s,"href",N=`${n[4].id}/edit`),q(B,"href",H=`${n[4].slug}#delete`)},m(D,E){w(D,e,E),_(e,t),he(l,t,null),_(e,f),_(e,r),_(r,a),_(a,i),_(e,b),_(e,u),_(u,m),_(e,o),_(e,c),_(c,s),_(s,g),_(e,z),_(e,I),_(I,B),_(B,U),_(e,W),C=!0},p(D,E){const O={};E&2&&(O.record=D[4]),E&2&&(O.file=D[4].files[0]),E&2&&(O.alt=D[4].title),l.$set(O),(!C||E&2)&&d!==(d=D[4].title+"")&&L(i,d),(!C||E&2&&p!==(p=D[4].slug))&&q(a,"href",p),(!C||E&2)&&A!==(A=D[4].updated+"")&&L(m,A),(!C||E&2&&N!==(N=`${D[4].id}/edit`))&&q(s,"href",N),(!C||E&2&&H!==(H=`${D[4].slug}#delete`))&&q(B,"href",H)},i(D){C||(S(l.$$.fragment,D),C=!0)},o(D){G(l.$$.fragment,D),C=!1},d(D){D&&h(e),de(l)}}}function oe(n){let e,t,l,f;const r=[we,Re],a=[];function d(i,p){var b;return((b=i[0])==null?void 0:b.id)==i[4].user?0:1}return e=d(n),t=a[e]=r[e](n),{c(){t.c(),l=te()},l(i){t.l(i),l=te()},m(i,p){a[e].m(i,p),w(i,l,p),f=!0},p(i,p){let b=e;e=d(i),e===b?a[e].p(i,p):(ue(),G(a[b],1,1,()=>{a[b]=null}),ie(),t=a[e],t?t.p(i,p):(t=a[e]=r[e](i),t.c()),S(t,1),t.m(l.parentNode,l))},i(i){f||(S(t),f=!0)},o(i){G(t),f=!1},d(i){a[e].d(i),i&&h(l)}}}function Be(n){let e,t,l,f,r,a;function d(o,c){return o[0]?Pe:Ne}let i=d(n),p=i(n),b=n[1].items,u=[];for(let o=0;o<b.length;o+=1)u[o]=oe(re(n,b,o));const A=o=>G(u[o],1,1,()=>{u[o]=null});let m=null;return b.length||(m=ae()),{c(){p.c(),e=P(),t=v("hr"),l=P(),f=v("table"),r=v("tbody");for(let o=0;o<u.length;o+=1)u[o].c();m&&m.c()},l(o){p.l(o),e=R(o),t=k(o,"HR",{}),l=R(o),f=k(o,"TABLE",{});var c=T(f);r=k(c,"TBODY",{});var s=T(r);for(let g=0;g<u.length;g+=1)u[g].l(s);m&&m.l(s),s.forEach(h),c.forEach(h)},m(o,c){p.m(o,c),w(o,e,c),w(o,t,c),w(o,l,c),w(o,f,c),_(f,r);for(let s=0;s<u.length;s+=1)u[s].m(r,null);m&&m.m(r,null),a=!0},p(o,[c]){if(i!==(i=d(o))&&(p.d(1),p=i(o),p&&(p.c(),p.m(e.parentNode,e))),c&3){b=o[1].items;let s;for(s=0;s<b.length;s+=1){const g=re(o,b,s);u[s]?(u[s].p(g,c),S(u[s],1)):(u[s]=oe(g),u[s].c(),S(u[s],1),u[s].m(r,null))}for(ue(),s=b.length;s<u.length;s+=1)A(s);ie(),!b.length&&m?m.p(o,c):b.length?m&&(m.d(1),m=null):(m=ae(),m.c(),m.m(r,null))}},i(o){if(!a){for(let c=0;c<b.length;c+=1)S(u[c]);a=!0}},o(o){u=u.filter(Boolean);for(let c=0;c<u.length;c+=1)G(u[c]);a=!1},d(o){p.d(o),o&&h(e),o&&h(t),o&&h(l),o&&h(f),be(u,o),m&&m.d()}}}function Ce(n,e,t){let l,f,r;Y(n,le,d=>t(3,l=d)),Y(n,Te,d=>t(0,f=d)),Ee(le,l.title="Recent Posts",l);const a=ke("posts",{sort:"-updated"});return Y(n,a,d=>t(1,r=d)),[f,r,a]}class Ie extends se{constructor(e){super(),fe(this,e,Ce,Be,ne,{})}}export{Ie as default};
